{"version":3,"file":"component---src-pages-read-[id]-tsx-8c97f714db74386bb8fa.js","mappings":"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","sources":["webpack://blockipedia/./node_modules/clsx/dist/clsx.m.js","webpack://blockipedia/./src/components/donation/index.tsx","webpack://blockipedia/./src/pages/read/[id].module.css","webpack://blockipedia/./src/pages/read/[id].tsx","webpack://blockipedia/./src/assets/svg/arrow-down.svg","webpack://blockipedia/./src/assets/svg/arrow-up.svg"],"sourcesContent":["function toVal(mix) {\n  var k,\n      y,\n      str = '';\n\n  if (typeof mix === 'string' || typeof mix === 'number') {\n    str += mix;\n  } else if (typeof mix === 'object') {\n    if (Array.isArray(mix)) {\n      for (k = 0; k < mix.length; k++) {\n        if (mix[k]) {\n          if (y = toVal(mix[k])) {\n            str && (str += ' ');\n            str += y;\n          }\n        }\n      }\n    } else {\n      for (k in mix) {\n        if (mix[k]) {\n          str && (str += ' ');\n          str += k;\n        }\n      }\n    }\n  }\n\n  return str;\n}\n\nexport default function () {\n  var i = 0,\n      tmp,\n      x,\n      str = '';\n\n  while (i < arguments.length) {\n    if (tmp = arguments[i++]) {\n      if (x = toVal(tmp)) {\n        str && (str += ' ');\n        str += x;\n      }\n    }\n  }\n\n  return str;\n}","import React, { useState } from \"react\"\nimport clsx from \"clsx\"\n\nexport function DonationModal(props: { show: boolean, articleId: number, dismiss: () => void }) {\n    const [tokens, setTokens] = useState<number>(0)\n\n    function donate() {\n        setTimeout(function () {\n            console.log(`Donating ${tokens} NEARs to article ${props.articleId}`)\n        }, 0)\n    }\n\n    return <div className={clsx(\n        \"absolute top-0 left-0 w-screen h-screen flex items-center justify-center bg-slate-600 bg-opacity-70 flex-col scale-0 transition-all origin-right duration-200\",\n        { \"scale-100\": props.show })}>\n        <div className=\"flex flex-col items-center justify-center gap-5 bg-gray-400 p-10 rounded-3xl\">\n            <p className=\"font-semibold text-slate-50 text-2xl\">You are about to donate to this article for {tokens} NEARs.</p>\n            <input className=\"border-none rounded w-40 h-16 text-right\" value={tokens} type=\"number\" step={0.00001} onChange={e => setTokens(parseFloat(e.target.value))}></input>\n            <div className=\"flex flex-row gap-4\">\n                <button className=\"bg-yellow-400 rounded-xl px-5 py-3 text-white font-bold text-2xl\" onClick={props.dismiss}>Cancel</button>\n                <button className=\"bg-blue-400 rounded-xl px-6 py-3 text-white font-bold text-2xl\" onClick={donate}>Send</button>\n            </div>\n        </div>\n    </div>\n}","// extracted by mini-css-extract-plugin\nexport var headerAction = \"[id]-module--headerAction--4AB8b\";\nexport var headerInfo = \"[id]-module--headerInfo--dlMrz\";\nexport var headerRating = \"[id]-module--headerRating--6PcAb\";\nexport var headerSection = \"[id]-module--headerSection--TjqUf\";\nexport var readingView = \"[id]-module--readingView--GTIOZ\";\nexport var titleSection = \"[id]-module--titleSection--gsLX6\";","import React, { useEffect, useState } from \"react\"\nimport { NEARAuthRoute, useContract } from \"../../components/nearAuth\"\n\nimport { DonationModal } from \"../../components/donation\"\nimport { headerAction, headerInfo, headerRating, headerSection, readingView, titleSection } from \"./[id].module.css\"\nimport { Helmet } from \"react-helmet\"\nimport { MarkdownRenderer } from \"../../components/markdown\"\n\nimport ArrowUp from \"../../assets/svg/arrow-up.svg\"\nimport ArrowDown from \"../../assets/svg/arrow-down.svg\"\n\ntype ArticleDetail = {\n    id: number,\n    title: string,\n    content: string,\n    author: string,\n    publishedDate: Date\n}\n\nenum VoteAction {\n    UP, DOWN\n}\n\nexport default function (props: { id: string }) {\n    const _id = parseInt(props.id)\n    const [article, setArticle] = useState<ArticleDetail | undefined>(undefined)\n    const [upvote, setUpvote] = useState<number>(1000)\n    const [downvote, setDownvote] = useState<number>(1000)\n\n    const [showDonation, setShowDonation] = useState(false)\n\n    const contract = useContract()\n\n    function vote(action: VoteAction) {\n        switch (action) {\n            case VoteAction.UP:\n                return setTimeout(function () {\n                    setUpvote(upvote + 1)\n                }, 0)\n            case VoteAction.DOWN:\n                return setTimeout(function () {\n                    setDownvote(downvote + 1)\n                }, 0)\n        }\n    }\n\n    useEffect(function () {\n        // Fetch article from contract\n        contract?.getArticle(_id).then(article => {\n            setArticle({\n                id: article.id,\n                title: article.title,\n                content: article.content,\n                author: article.author,\n                publishedDate: new Date(article.published_date / 1000000)\n            })\n        })\n    }, [])\n\n    if (article !== undefined) {\n        return <NEARAuthRoute>\n            <Helmet>\n                <title>Blockipedia: {article.title}</title>\n            </Helmet>\n            <article className={readingView}>\n                <div className={headerSection}>\n                    <div className={headerInfo}>\n                        <div>\n                            <div>{article.author}</div>\n                            <div>{article.publishedDate.toDateString()}</div>\n                        </div>\n                        <div className={headerRating} >\n                            <button onClick={vote.bind(null, VoteAction.UP)}><ArrowUp /></button>\n                            {upvote}\n                            <button onClick={vote.bind(null, VoteAction.DOWN)}><ArrowDown /></button>\n                            {downvote}\n                        </div>\n                    </div>\n                    <div className={headerAction}>\n                        <button onClick={setShowDonation.bind(null, true)}>Donate</button>\n                    </div>\n                </div>\n                <div className={titleSection}>\n                    {article.title}\n                </div>\n                <div>\n                    <MarkdownRenderer>\n                        {article.content}\n                    </MarkdownRenderer>\n                </div>\n            </article>\n\n            <DonationModal show={showDonation} articleId={article.id} dismiss={setShowDonation.bind(null, false)}></DonationModal>\n        </NEARAuthRoute>\n    } else {\n        return <NEARAuthRoute>\n            <Helmet>\n                <title>Blockipedia: Loading...</title>\n            </Helmet>\n            <article className={readingView}>\n                Loading article ...\n            </article>\n        </NEARAuthRoute>\n    }\n}\n","var React = require('react');\n\nfunction ArrowDown (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"rect\",{\"width\":\"48\",\"height\":\"48\",\"fill\":\"white\",\"fillOpacity\":\"0.01\",\"key\":0}),React.createElement(\"path\",{\"d\":\"M37 18L25 30L13 18\",\"stroke\":\"black\",\"strokeWidth\":\"4\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"key\":1})]);\n}\n\nArrowDown.defaultProps = {\"width\":\"30px\",\"height\":\"30px\",\"viewBox\":\"0 0 48 48\",\"fill\":\"none\"};\n\nmodule.exports = ArrowDown;\n\nArrowDown.default = ArrowDown;\n","var React = require('react');\n\nfunction ArrowUp (props) {\n    return React.createElement(\"svg\",props,[React.createElement(\"rect\",{\"width\":\"48\",\"height\":\"48\",\"fill\":\"white\",\"fillOpacity\":\"0.01\",\"key\":0}),React.createElement(\"path\",{\"d\":\"M13 30L25 18L37 30\",\"stroke\":\"black\",\"strokeWidth\":\"4\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"key\":1})]);\n}\n\nArrowUp.defaultProps = {\"width\":\"30px\",\"height\":\"30px\",\"viewBox\":\"0 0 48 48\",\"fill\":\"none\"};\n\nmodule.exports = ArrowUp;\n\nArrowUp.default = ArrowUp;\n"],"names":["toVal","mix","k","y","str","Array","isArray","length","tmp","x","i","arguments","DonationModal","props","useState","tokens","setTokens","React","className","clsx","show","value","type","step","onChange","e","parseFloat","target","onClick","dismiss","setTimeout","console","log","articleId","VoteAction","readingView","_id","parseInt","id","undefined","article","setArticle","upvote","setUpvote","downvote","setDownvote","showDonation","setShowDonation","contract","useContract","vote","action","UP","DOWN","useEffect","getArticle","then","title","content","author","publishedDate","Date","published_date","NEARAuthRoute","Helmet","toDateString","bind","ArrowUp","ArrowDown","MarkdownRenderer","createElement","defaultProps","module","exports","default"],"sourceRoot":""}